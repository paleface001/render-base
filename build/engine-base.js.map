{"version":3,"file":"engine-base.js","sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b855f0227a303c7abdba","webpack:///./index.js","webpack:///./buffer.js","webpack:///./shader.js","webpack:///./program.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"engine-base\"] = factory();\n\telse\n\t\troot[\"engine-base\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b855f0227a303c7abdba","var Buffer = require('./buffer');\nvar Shader = require('./shader');\nvar Program = require('./program');\n\nwindow.EngineBase = { Buffer: Buffer.default, Shader: Shader.default, Program: Program.default };\n\nmodule.exports = EngineBase;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./index.js\n// module id = 0\n// module chunks = 0","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = function () {\n    function Buffer(gl, cfg) {\n        _classCallCheck(this, Buffer);\n\n        this.gl = gl;\n        this.target = cfg.target;\n        this.usage = cfg.usage;\n        this.dataSetted = false;\n        this._initialize(cfg);\n    }\n\n    Buffer.prototype._initialize = function _initialize(cfg) {\n        this.buffer = this.gl.createBuffer();\n        if (cfg.data) {\n            this._setData(cfg.data);\n        }\n    };\n\n    Buffer.prototype._setData = function _setData(data, offset) {\n        this.bind();\n        if (offset) {\n            this.gl.bufferSubData(this.target, offset, data);\n        } else {\n            this.gl.bufferData(this.target, data, this.usage);\n            this.dataSetted = true;\n        }\n        this.unbind();\n    };\n\n    Buffer.prototype.setData = function setData(opts) {\n        if (opts.target) this.target = opts.target;\n        if (opts.usage) this.usage = opts.usage;\n        this._setData(opts.data);\n    };\n\n    Buffer.prototype.setSubData = function setSubData(data, offset) {\n        if (this.dataSetted) {\n            this._setData(data, offset);\n        }\n    };\n\n    Buffer.prototype.bind = function bind() {\n        this.gl.bindBuffer(this.target, this.buffer);\n    };\n\n    Buffer.prototype.unbind = function unbind() {\n        this.gl.bindBuffer(this.target, null);\n    };\n\n    Buffer.prototype.destory = function destory() {\n        this.gl.deleteBuffer(this.buffer);\n    };\n\n    return Buffer;\n}();\n\nexport default Buffer;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./buffer.js\n// module id = 1\n// module chunks = 0","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Shader = function () {\n    function Shader(gl, cfg) {\n        _classCallCheck(this, Shader);\n\n        this.gl = gl;\n        this.type = cfg.type;\n        this.source = cfg.source;\n        this._initialize();\n    }\n\n    Shader.prototype._initialize = function _initialize() {\n        this.shader = this.gl.createShader(this.type);\n        this.gl.shaderSource(this.shader, this.source);\n        this.gl.compileShader(this.shader);\n        var success = this.gl.getShaderParameter(this.shader, gl.COMPILE_STATUS);\n        if (!success) {\n            throw 'shader compile error';\n        }\n    };\n\n    Shader.prototype.destory = function destory() {\n        this.gl.deleteShader(this.shader);\n    };\n\n    return Shader;\n}();\n\nexport default Shader;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./shader.js\n// module id = 2\n// module chunks = 0","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Program = function () {\n    function Program(gl, cfg) {\n        _classCallCheck(this, Program);\n\n        this.gl = gl;\n        this.vertexShader = cfg.vertexShader;\n        this.fragmentShader = cfg.fragmentShader;\n        this._initialize();\n    }\n\n    Program.prototype._initialize = function _initialize() {\n        this.program = this.gl.createProgram();\n        this.gl.attachShader(this.program, this.vertexShader);\n        this.gl.attachShader(this.program, this.fragmentShader);\n        this.gl.linkProgram(this.program);\n        var sucess = gl.getProgramParameter(this.program, gl.LINK_STATUS);\n        if (!sucess) {\n            throw 'link shader failed';\n        }\n        this.gl.useProgram(this.program);\n    };\n\n    Program.prototype.setAttribute = function setAttribute(name, buffer, accessInfo) {\n        var location = this._getAttribLocation(name);\n        this.gl.enableVertexAttribArray(location);\n        buffer.bind();\n        this.gl.vertexAttribPointer(location, accessInfo.size, accessInfo.type, accessInfo.normalize, accessInfo.stride, accessInfo.offset);\n        buffer.unbind();\n    };\n\n    Program.prototype.setUniform = function setUniform(name, type, value, length) {\n        if (length > 4) {\n            throw error;\n        }\n        var location = this._getUniformLocation(name);\n        if (type === 'FLOAT') {\n            this._setFloatUniform(location, value, length);\n        }\n        this._setIntUniform(location, value, length);\n        this._setBooleanUniform(location, value, length);\n    };\n\n    Program.prototype.draw = function draw(opts) {\n        if (opts.type && opts.type === 'indexed') {\n            this.gl.drawElements(opts.drawMode, opts.count, opts.indexType, opts.offset);\n        } else {\n            this.gl.drawArrays(opts.drawMode, opts.offset, opts.count);\n        }\n    };\n\n    Program.prototype.destory = function destory() {\n        this.gl.deleteProgram(this.program);\n    };\n\n    Program.prototype._getAttribLocation = function _getAttribLocation(name) {\n        return this.gl.getAttribLocation(this.program, name);\n    };\n\n    Program.prototype._getUniformLocation = function _getUniformLocation(name) {\n        return this.gl.getUniformLocation(this.program, name);\n    };\n\n    Program.prototype._setFloatUniform = function _setFloatUniform(location, value, length) {\n        if (length == 1) this.gl.uniform1fv(location, value);\n        if (length == 2) this.gl.uniform2fv(location, value);\n        if (length == 3) this.gl.uniform3fv(location, value);\n        if (length == 4) this.gl.uniform4fv(location, value);\n    };\n\n    Program.prototype._setIntUniform = function _setIntUniform(location, value, length) {\n        /*if(length == 1) this.gl.uniform1iv(location, value);\n        if(length == 2) this.gl.uniform2iv(location, value);\n        if(length == 3) this.gl.uniform3iv(location, value);\n        if(length == 4) this.gl.uniform4iv(location, value);*/\n    };\n\n    Program.prototype._setBooleanUniform = function _setBooleanUniform() {};\n\n    Program.prototype._setTextureUniform = function _setTextureUniform() {};\n\n    return Program;\n}();\n\nexport default Program;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./program.js\n// module id = 3\n// module chunks = 0"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACNA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1DA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7BA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}